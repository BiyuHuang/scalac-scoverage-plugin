<table class="classes"><tbody><tr>
      <td class="barContainerLeft"><a href="#">&#x200B;reaktor/&#x200B;scct/<span class="header">&#x200B;IO.scala</span></a></td>
      <td class="barContainerRight"><div class="percentages">
      <div class="bar">
        <div class="percentage">20 %</div>
        <div class="greenBar" style="width:40px;">&nbsp;</div>
      </div>
    </div></td>
    </tr><tr>
      <td class="barContainerLeft"><a href="src-src_main_scala_reaktor_scct_IO.scala.html#Object_reaktor_scct_IO"><img src="object.png"></img>IO</a></td>
      <td class="barContainerRight"><div class="percentages">
      <div class="bar">
        <div class="percentage">0 %</div>
        <div class="greenBar" style="width:0px;">&nbsp;</div>
      </div>
    </div></td>
    </tr><tr>
      <td class="barContainerLeft"><a href="src-src_main_scala_reaktor_scct_IO.scala.html#Trait_reaktor_scct_IO"><img src="trait.png"></img>IO</a></td>
      <td class="barContainerRight"><div class="percentages">
      <div class="bar">
        <div class="percentage">20 %</div>
        <div class="greenBar" style="width:40px;">&nbsp;</div>
      </div>
    </div></td>
    </tr></tbody></table><table class="source"><tbody><tr>
            <td class="black">1</td>
            <td>package reaktor.scct
</td>
          </tr><tr>
            <td class="black">2</td>
            <td>
</td>
          </tr><tr>
            <td class="black">3</td>
            <td>import io.Source
</td>
          </tr><tr>
            <td class="black">4</td>
            <td>import java.io._
</td>
          </tr><tr>
            <td class="black">5</td>
            <td>
</td>
          </tr><tr>
            <td class="black">6</td>
            <td><a id="Object_reaktor_scct_IO"></a>object IO extends IO
</td>
          </tr><tr>
            <td class="black">7</td>
            <td>
</td>
          </tr><tr>
            <td class="black">8</td>
            <td><a id="Trait_reaktor_scct_IO"></a>trait IO {
</td>
          </tr><tr>
            <td class="green">9</td>
            <td>  val workingDir = new File(System.getProperty(&quot;user.dir&quot;))
</td>
          </tr><tr>
            <td class="black">10</td>
            <td>  def withInputStream[A, B &lt;: InputStream](in: B)(func: B =&gt; A): A = {
</td>
          </tr><tr>
            <td class="black">11</td>
            <td>    try {
</td>
          </tr><tr>
            <td class="red">12</td>
            <td>      <span class="non">func(in)
</span></td>
          </tr><tr>
            <td class="black">13</td>
            <td>    } finally {
</td>
          </tr><tr>
            <td class="red">14</td>
            <td>      <span class="non">in.close
</span></td>
          </tr><tr>
            <td class="black">15</td>
            <td>    }
</td>
          </tr><tr>
            <td class="black">16</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">17</td>
            <td>  def withOutputStream[A, B &lt;: OutputStream](out: B)(func: B =&gt; A): A = {
</td>
          </tr><tr>
            <td class="black">18</td>
            <td>    try {
</td>
          </tr><tr>
            <td class="green">19</td>
            <td>      func(out)
</td>
          </tr><tr>
            <td class="black">20</td>
            <td>    } finally {
</td>
          </tr><tr>
            <td class="green">21</td>
            <td>      out.close
</td>
          </tr><tr>
            <td class="black">22</td>
            <td>    }
</td>
          </tr><tr>
            <td class="black">23</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">24</td>
            <td>
</td>
          </tr><tr>
            <td class="black">25</td>
            <td>  def write(file: File, content: Array[Byte]) {
</td>
          </tr><tr>
            <td class="red">26</td>
            <td>    <span class="non">withOutputStream(new FileOutputStream(file)) { out =&gt; out.write(content) }
</span></td>
          </tr><tr>
            <td class="black">27</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">28</td>
            <td>
</td>
          </tr><tr>
            <td class="black">29</td>
            <td>  def write(fileName: String, content: String) {
</td>
          </tr><tr>
            <td class="red">30</td>
            <td>    <span class="non">write(new File(fileName), content.getBytes(&quot;utf-8&quot;))
</span></td>
          </tr><tr>
            <td class="black">31</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">32</td>
            <td>
</td>
          </tr><tr>
            <td class="black">33</td>
            <td>  def write(file: File, content: String) {
</td>
          </tr><tr>
            <td class="red">34</td>
            <td>    <span class="non">write(file, content.getBytes(&quot;utf-8&quot;))
</span></td>
          </tr><tr>
            <td class="black">35</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">36</td>
            <td>
</td>
          </tr><tr>
            <td class="black">37</td>
            <td>  def readResource(resourceName: String): String = {
</td>
          </tr><tr>
            <td class="red">38</td>
            <td>    <span class="non">withInputStream(getClass.getResourceAsStream(resourceName)) { in =&gt;
</span></td>
          </tr><tr>
            <td class="red">39</td>
            <td>      <span class="non">Source.fromInputStream(in, &quot;utf-8&quot;).mkString
</span></td>
          </tr><tr>
            <td class="black">40</td>
            <td>    }
</td>
          </tr><tr>
            <td class="black">41</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">42</td>
            <td>  def readResourceBytes(resourceName: String): Array[Byte] = {
</td>
          </tr><tr>
            <td class="red">43</td>
            <td>    <span class="non">withInputStream(getClass.getResourceAsStream(resourceName)) { in =&gt;
</span></td>
          </tr><tr>
            <td class="red">44</td>
            <td>      <span class="non">toBytes(in)
</span></td>
          </tr><tr>
            <td class="black">45</td>
            <td>    }
</td>
          </tr><tr>
            <td class="black">46</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">47</td>
            <td>
</td>
          </tr><tr>
            <td class="black">48</td>
            <td>  private def toBytes(in: InputStream) = {
</td>
          </tr><tr>
            <td class="red">49</td>
            <td>    val out = <span class="non">new ByteArrayOutputStream
</span></td>
          </tr><tr>
            <td class="black">50</td>
            <td>    try {
</td>
          </tr><tr>
            <td class="red">51</td>
            <td>      <span class="non">transfer(in, out, new Array[Byte](8192))
</span></td>
          </tr><tr>
            <td class="black">52</td>
            <td>    } finally {
</td>
          </tr><tr>
            <td class="red">53</td>
            <td>      <span class="non">out.close()
</span></td>
          </tr><tr>
            <td class="black">54</td>
            <td>    }
</td>
          </tr><tr>
            <td class="red">55</td>
            <td>    <span class="non">out.toByteArray()
</span></td>
          </tr><tr>
            <td class="black">56</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">57</td>
            <td>
</td>
          </tr><tr>
            <td class="black">58</td>
            <td>  private def transfer(in: InputStream, out: OutputStream, buffer: Array[Byte]): OutputStream = {
</td>
          </tr><tr>
            <td class="red">59</td>
            <td>    val count = <span class="non">in.read(buffer)
</span></td>
          </tr><tr>
            <td class="red">60</td>
            <td>    if (<span class="non">count &gt; 0) {
</span></td>
          </tr><tr>
            <td class="red">61</td>
            <td>      <span class="non">out.write(buffer, 0, count)
</span></td>
          </tr><tr>
            <td class="red">62</td>
            <td>      <span class="non">transfer(in, out, buffer)
</span></td>
          </tr><tr>
            <td class="black">63</td>
            <td>    } else {
</td>
          </tr><tr>
            <td class="red">64</td>
            <td>      <span class="non">out
</span></td>
          </tr><tr>
            <td class="black">65</td>
            <td>    }
</td>
          </tr><tr>
            <td class="black">66</td>
            <td>  }
</td>
          </tr><tr>
            <td class="black">67</td>
            <td>
</td>
          </tr><tr>
            <td class="green">68</td>
            <td>  def relativePath(f: File): String = relativePath(f, workingDir)
</td>
          </tr><tr>
            <td class="green">69</td>
            <td>  def relativePath(f: File, to: File): String = to.toURI.relativize(f.toURI).toString
</td>
          </tr><tr>
            <td class="black">70</td>
            <td>
</td>
          </tr><tr>
            <td class="black">71</td>
            <td>}
</td>
          </tr></tbody></table>